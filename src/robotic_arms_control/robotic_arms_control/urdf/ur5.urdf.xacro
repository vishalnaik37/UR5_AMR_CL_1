<?xml version="1.0"?>
<robot name="ur5" xmlns:xacro="http://www.ros.org/wiki/xacro">

  <!-- ===================== -->
  <!-- Properties -->
  <!-- ===================== -->
  <!-- <xacro:property name="pi" value="3.141592653589793"/> -->
  <xacro:property name="shoulder_height" value="0.089159"/>
  <xacro:property name="upperarm_length" value="0.425"/>
  <xacro:property name="forearm_length" value="0.39225"/>
  <xacro:property name="wrist1_length" value="0.10915"/>
  <xacro:property name="wrist2_length" value="0.09465"/>
  <xacro:property name="wrist3_length" value="0.0823"/>

  <!-- Materials -->
  <material name="UR/Blue">
    <color rgba="0.0 0.0 0.8 1.0"/>
  </material>
  <material name="UR/Grey">
    <color rgba="0.7 0.7 0.7 1.0"/>
  </material>

  <!-- ===================== -->
  <!-- Static Base Setup -->
  <!-- ===================== -->
  <link name="world"/>

  <link name="basin_link2">
    <visual>
      <geometry><cylinder radius="0.3" length="0.1"/></geometry>
      <origin xyz="0 0 0.05"/>
      <material name="White"><color rgba="0.9 0.9 0.9 1"/></material>
    </visual>
    <collision>
      <geometry><cylinder radius="0.3" length="0.1"/></geometry>
      <origin xyz="0 0 0.05"/>
    </collision>
    <inertial>
      <mass value="5.0"/>
      <inertia ixx="1" iyy="1" izz="1" ixy="0" ixz="0" iyz="0"/>
    </inertial>
  </link>

  <link name="stand_link">
    <visual>
      <geometry><box size="0.1 0.1 0.8"/></geometry>
      <origin xyz="0 0 0.4"/>
      <material name="Grey"><color rgba="0.5 0.5 0.5 1"/></material>
    </visual>
    <collision>
      <geometry><box size="0.1 0.1 0.8"/></geometry>
      <origin xyz="0 0 0.4"/>
    </collision>
    <inertial>
      <mass value="3.0"/>
      <inertia ixx="1" iyy="1" izz="1" ixy="0" ixz="0" iyz="0"/>
    </inertial>
  </link>

  <link name="basin_link">
    <visual>
      <geometry><cylinder radius="0.3" length="0.1"/></geometry>
      <origin xyz="0 0 0.05"/>
      <material name="White"><color rgba="0.9 0.9 0.9 1"/></material>
    </visual>
  </link>

  <!-- Joints to fix basin & stand -->
  <joint name="world_to_basin2" type="fixed">
    <parent link="world"/>
    <child link="basin_link2"/>
  </joint>

  <joint name="basin2_to_stand" type="fixed">
    <parent link="basin_link2"/>
    <child link="stand_link"/>
  </joint>

  <joint name="stand_to_basin" type="fixed">
    <parent link="stand_link"/>
    <child link="basin_link"/>
    <origin xyz="0 0 0.8"/>
  </joint>

  <!-- ===================== -->
  <!-- UR5 Arm -->
  <!-- ===================== -->
  <joint name="basin_to_ur5" type="fixed">
    <parent link="basin_link"/>
    <child link="base_link"/>
    <origin xyz="0 0 0.1"/>
  </joint>

  <!-- Base -->
  <link name="base_link">
    <visual>
      <geometry>
        <mesh filename="package://ur5_description/meshes/ur5/visual/Base.dae"/>
      </geometry>
    </visual>
  </link>

  <!-- Shoulder -->
  <joint name="shoulder_pan_joint" type="revolute">
    <parent link="base_link"/>
    <child link="shoulder_link"/>
    <origin xyz="0 0 ${shoulder_height}"/>
    <axis xyz="0 0 1"/>
    <limit lower="-${pi}" upper="${pi}" effort="150" velocity="1.5"/>
  </joint>

  <link name="shoulder_link">
    <visual>
      <geometry>
        <mesh filename="package://ur5_description/meshes/ur5/visual/Shoulder.dae"/>
      </geometry>
    </visual>
  </link>

  <!-- Upper arm -->
  <joint name="shoulder_lift_joint" type="revolute">
    <parent link="shoulder_link"/>
    <child link="upper_arm_link"/>
    <origin xyz="0 0 0" rpy="0 ${pi/2} 0"/>
    <axis xyz="0 1 0"/>
    <limit lower="-${pi}" upper="${pi}" effort="150" velocity="1.5"/>
  </joint>

  <link name="upper_arm_link">
    <visual>
      <geometry>
        <mesh filename="package://ur5_description/meshes/ur5/visual/UpperArm.dae"/>
      </geometry>
    </visual>
  </link>

  <!-- Elbow -->
  <joint name="elbow_joint" type="revolute">
    <parent link="upper_arm_link"/>
    <child link="forearm_link"/>
    <origin xyz="0 0 ${upperarm_length}"/>
    <axis xyz="0 1 0"/>
    <limit lower="-${pi}" upper="${pi}" effort="150" velocity="1.5"/>
  </joint>

  <link name="forearm_link">
    <visual>
      <geometry>
        <mesh filename="package://ur5_description/meshes/ur5/visual/Forearm.dae"/>
      </geometry>
    </visual>
  </link>

  <!-- Wrist joints -->
  <joint name="wrist_1_joint" type="revolute">
    <parent link="forearm_link"/>
    <child link="wrist_1_link"/>
    <origin xyz="0 0 ${forearm_length}"/>
    <axis xyz="0 1 0"/>
    <limit lower="-${pi}" upper="${pi/2}" effort="28" velocity="2.0"/>
  </joint>

  <link name="wrist_1_link">
    <visual>
      <geometry>
        <mesh filename="package://ur5_description/meshes/ur5/visual/Wrist1.dae"/>
      </geometry>
    </visual>
  </link>

  <joint name="wrist_2_joint" type="revolute">
    <parent link="wrist_1_link"/>
    <child link="wrist_2_link"/>
    <origin xyz="0 0 ${wrist1_length}"/>
    <axis xyz="0 0 1"/>
    <limit lower="-${pi}" upper="${pi}" effort="28" velocity="2.0"/>
  </joint>

  <link name="wrist_2_link">
    <visual>
      <geometry>
        <mesh filename="package://ur5_description/meshes/ur5/visual/Wrist2.dae"/>
      </geometry>
    </visual>
  </link>

  <joint name="wrist_3_joint" type="revolute">
    <parent link="wrist_2_link"/>
    <child link="wrist_3_link"/>
    <origin xyz="0 0 ${wrist2_length}"/>
    <axis xyz="0 1 0"/>
    <limit lower="-${pi}" upper="${pi}" effort="28" velocity="2.0"/>
  </joint>

  <link name="wrist_3_link">
    <visual>
      <geometry>
        <mesh filename="package://ur5_description/meshes/ur5/visual/Wrist3.dae"/>
      </geometry>
    </visual>
  </link>

  <!-- EE -->
  <joint name="ee_fixed_joint" type="fixed">
    <parent link="wrist_3_link"/>
    <child link="ee_link"/>
    <origin xyz="0 0 ${wrist3_length}" rpy="0 0 ${pi/2}"/>
  </joint>

  <link name="ee_link"/>

  <!-- ===================== -->
  <!-- Extra Brush Tool -->
  <!-- ===================== -->
  <link name="brush_link">
    <visual>
      <geometry><cylinder length="0.3" radius="0.02"/></geometry>
      <origin xyz="0 0 0.15"/>
      <material name="UR/Blue"/>
    </visual>
  </link>

  <joint name="brush_joint" type="fixed">
    <parent link="ee_link"/>
    <child link="brush_link"/>
    <origin rpy="0 ${pi/2} 0"/>
  </joint>

  <!-- ===================== -->
  <!-- Washbasin -->
  <!-- ===================== -->
  <link name="washbasin_link">
    <visual>
      <geometry>
        <mesh filename="package://ur5_description/meshes/ur5/visual/basin.STL" scale="0.001 0.001 0.001"/>
      </geometry>
      <origin xyz="0.2 0 0.8" rpy="-${pi} 0 0"/>
    </visual>
  </link>

  <joint name="world_to_washbasin" type="fixed">
    <parent link="world"/>
    <child link="washbasin_link"/>
  </joint>

</robot>
